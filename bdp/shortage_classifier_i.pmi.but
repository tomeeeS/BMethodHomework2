Flag(FileOn("shortage_classifier_i.pmi.res")) & Set(toto | CurrentStocks: 1..5 +-> 0..4000 & dom(CurrentStocks) = 1..5 & CurrentStocks: 1..5 --> 0..4000 & ii: dom(CurrentStocks) & MaxStocks: 1..5 +-> 0..4000 & dom(MaxStocks) = 1..5 & MaxStocks: 1..5 --> 0..4000 & Shortages: 1..5 +-> BOOL & dom(Shortages) = 1..5 & Shortages: 1..5 --> BOOL & NewCurrentStock: 0..4000 & !xx.(xx: dom(Shortages|>{TRUE}) => CurrentStocks(xx)+1<=MaxStocks(xx)/2) & !xx.(xx: dom(CurrentStocks) & CurrentStocks(xx)+1<=MaxStocks(xx)/2 => xx: dom(Shortages|>{TRUE})) & CurrentStocks(ii)+1<=MaxStocks(ii)/2 & SET(xx).(xx: dom(CurrentStocks) & 0<= -1-(CurrentStocks<+{ii|->NewCurrentStock})(xx)+MaxStocks(xx)/2): POW(dom(CurrentStocks)) & 2: dom(Shortages) & 2: dom(MaxStocks) & 2: dom(CurrentStocks) & MaxStocks: 1..5 <-> 0..4000 & ii|->NewCurrentStock: dom(CurrentStocks)*(0..4000) & ii: 1..5 & ii: dom(Shortages) & ii: dom(MaxStocks) & CurrentStocks: 1..5 <-> 0..4000 & 1: dom(Shortages) & 1: dom(MaxStocks) & 1: dom(CurrentStocks) & Shortages: 1..5 <-> BOOL & dom(MaxStocks): POW(1..5) & ran(MaxStocks): POW(0..4000) & 1<=ii & ii<=5 & dom(CurrentStocks): POW(1..5) & ran(CurrentStocks): POW(0..4000) & 0<=ii & dom(Shortages): POW(1..5) & ran(Shortages): POW(BOOL) & SET(xx).(xx: dom(CurrentStocks) & 0<= -1-(CurrentStocks<+{ii|->NewCurrentStock})(xx)+MaxStocks(xx)/2): POW(1..5) & SET(xx).(xx: 1..5 & 0<= -1-(CurrentStocks<+{ii|->NewCurrentStock})(xx)+MaxStocks(xx)/2): POW(1..5) & ii|->NewCurrentStock: dom(MaxStocks)*(0..4000) & ii|->NewCurrentStock: dom(Shortages)*(0..4000) & ii|->NewCurrentStock: (1..5)*(0..4000) & SET(xx).(xx: 1..5 & 0<= -1-(CurrentStocks<+{ii|->NewCurrentStock})(xx)+MaxStocks(xx)/2): POW(INTEGER) & SET(xx).(xx: dom(CurrentStocks) & 0<= -1-(CurrentStocks<+{ii|->NewCurrentStock})(xx)+MaxStocks(xx)/2): POW(INTEGER) & dom(Shortages): POW(INTEGER) & dom(CurrentStocks): POW(INTEGER) & dom(MaxStocks): POW(INTEGER) & ii: INTEGER & ii|->NewCurrentStock: INTEGER*(0..4000) => Shortages~[{TRUE}]\/{ii} = SET(xx).(xx: 1..5 & 0<= -1-(CurrentStocks<+{ii|->NewCurrentStock})(xx)+MaxStocks(xx)/2))