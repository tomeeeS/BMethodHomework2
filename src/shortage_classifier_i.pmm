THEORY User_Pass IS
Pattern(dom(a<+{b|->c}|>{c}) = SET(d).(d : dom(e) & (e<+{b|->f})(d)+g<=h(d)/i)) 
	& ff(0) & dd & ah(dom(CurrentStocks) = dom(CurrentStocks<+{ii|->NewCurrentStock})) & pr & dd & eh(dom(CurrentStocks),_h,Goal) & ah(dom(CurrentStocks<+{ii|->NewCurrentStock}) = dom({ii}<<|CurrentStocks<+{ii|->NewCurrentStock})\/{ii}) & pr & dd & eh(dom(CurrentStocks<+{ii|->NewCurrentStock}),_h,Goal) & ah({xx | xx : dom({ii}<<|CurrentStocks<+{ii|->NewCurrentStock})\/{ii} & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2} = {xx | xx : dom({ii}<<|CurrentStocks<+{ii|->NewCurrentStock}) & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2}\/{xx | xx : {ii} & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2}) & pr & dd & eh({xx | xx : dom({ii}<<|CurrentStocks<+{ii|->NewCurrentStock})\/{ii} & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2},_h,Goal) & ah({xx | xx : {ii} & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2} = {ii}) & ah({xx | xx : {ii} & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2} <: {ii}) & ss & pr & ah({ii} <: {xx | xx : {ii} & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2}) & pr & dd & dd & ar(GenEqualityX.5,Fwd) & dd & eh({xx | xx : {ii} & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2},_h,Goal) & eh(dom(Shortages<+{ii|->TRUE}|>{TRUE}),_h,Goal) & ah(dom({ii}<<|Shortages|>{TRUE}) = {xx | xx : dom({ii}<<|CurrentStocks<+{ii|->NewCurrentStock}) & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2}) & ah({xx | xx : dom({ii}<<|CurrentStocks<+{ii|->NewCurrentStock}) & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2} = {xx | xx : dom({ii}<<|CurrentStocks<+{ii|->NewCurrentStock}) & CurrentStocks(xx)+1<=MaxStocks(xx)/2}) & ss & pr & dd & eh({xx | xx : dom({ii}<<|CurrentStocks<+{ii|->NewCurrentStock}) & (CurrentStocks<+{ii|->NewCurrentStock})(xx)+1<=MaxStocks(xx)/2},_h,Goal) & pr & dd & eh(dom({ii}<<|Shortages|>{TRUE}),_h,Goal) & pr
END
